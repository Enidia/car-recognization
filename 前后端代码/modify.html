<!DOCTYPE html>
<html>
<head>
    <title>Modify</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--收藏夹显示图标-->
    <link rel="shortcut icon" href="/Icon/titlelead.ico" type="image/x-icon" />
    <meta charset="utf-8" />
    <link rel="stylesheet" type="text/css" href="/css/sroundtypeformal.css" />
    <link rel="stylesheet" type="text/css" href="/css/buttonup.css" />
    <link rel="stylesheet" type="text/css" href="/css/filterin.css" />
    <link rel="stylesheet" type="text/css" href="/css/gradient_typeface.css" />
    <link rel="stylesheet" type="text/css" href="/css/class.css" />
    <link rel="stylesheet" type="text/css" href="/css/style.css" />
    <link rel="stylesheet" type="text/css" href="/css/fontstyles.css" />
    <link rel="stylesheet" type="text/css" href="/css/normalize.css" />
    <link rel="shortcut icon" href="/icon/modify.png" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="/css/bootstrap-grid.css" />
    <link rel="stylesheet" type="text/css" href="/css/bootstrap-reboot.css" />
    <link rel="stylesheet" type="text/css" href="/css/bootstrap.css" />
    <link rel="icon" href="/icon/modify.png" type="image/x-icon" />
    <style type="text/css">
        body, html {
            margin: 0 auto;
        }

        .adjust {
            margin: 0 auto;
            width: 40%;
        }

        div.foo {
            width: 90%;
            margin: 0 auto;
            text-align: center;
        }

        .letter {
            display: inline-block;
            font-weight: 900;
            font-size: 8em;
            margin: 0.2em;
            position: relative;
            color: #00B4F1;
            transform-style: preserve-3d;
            perspective: 400;
            z-index: 1;
        }

            .letter:before, .letter:after {
                position: absolute;
                content: attr(data-letter);
                transform-origin: top left;
                top: 0;
                left: 0;
            }

            .letter, .letter:before, .letter:after {
                transition: all 0.3s ease-in-out;
            }

                .letter:before {
                    color: #fff;
                    text-shadow: -1px 0px 1px rgba(255,255,255,.8), 1px 0px 1px rgba(0,0,0,.8);
                    z-index: 3;
                    transform: rotateX(0deg) rotateY(-15deg) rotateZ(0deg);
                }

                .letter:after {
                    color: rgba(0,0,0,.11);
                    z-index: 2;
                    transform: scale(1.08,1) rotateX(0deg) rotateY(0deg) rotateZ(0deg) skew(0deg,1deg);
                }

                .letter:hover:before {
                    color: #fafafa;
                    transform: rotateX(0deg) rotateY(-40deg) rotateZ(0deg);
                }

                .letter:hover:after {
                    transform: scale(1.08,1) rotateX(0deg) rotateY(40deg) rotateZ(0deg) skew(0deg,22deg);
                }
    </style>
</head>
<body style="overflow-x:hidden">
    <div class="into">
        <div class="container-fluid">
            <div class="row">
                <div class="col-12 col-sm-12 col-md-12 col-lg-12" style="text-align: center">
                    <div class="round" style="width: 80px; height: 80px; top: 5%; left: 5%; text-align: center; z-index: 9999" id="main">
                        <label style="position: relative; top: 7%; bottom: 10%; font-size: 25px; margin: 10% 10% 10% 10%; color: chocolate">Back</label>
                    </div>
                    <div class="foo" style="font-size: 10px">
                        <span class="letter" data-letter="M">M</span>
                        <span class="letter" data-letter="O">O</span>
                        <span class="letter" data-letter="D">D</span>
                        <span class="letter" data-letter="I">I</span>
                        <span class="letter" data-letter="F">F</span>
                        <span class="letter" data-letter="Y">Y</span>
                    </div>
                </div>
            </div>
            <div class="row shadow" style="text-align: center">
                <div class="col-12 col-sm-12 col-md-12 col-lg-12" style="text-align: center">
                    <div>
                        <label class="bluered" style="font-size: 20px">Past User Id</label>
                    </div>
                    <div>
                        <label class="purplebule" style="font-size: 20px" id="pastuserId"></label>
                    </div>
                </div>
                <br />
                <br />
                <br />
                <br />
            </div>
            <br />
            <div class="row shadow shadowing rentacle" style="text-align: center">
                <div class="col-12 col-sm-6 col-md-6 col-lg-6" style="text-align: center">
                    <div>
                        <label class="bluered" style="font-size: 20px">Past User Name</label>
                    </div>
                    <div>
                        <label class="purplebule" style="font-size: 20px" id="pastuserName"></label>
                    </div>
                </div>
                <div class="col-12 col-sm-6 col-md-6 col-lg-6" style="text-align: center">
                    <div>
                        <label class="purplebule" style="font-size: 20px">Change to User Name</label>
                    </div>
                    <div>
                        <input type="text" style="text-align: center; width: 200px; height: 25px" class="type" id="userName" name="userName" onkeyup="this.value=this.value.replace(/\s+/g,'')" maxlength="15" />
                    </div>
                </div>
                <br />
                <br />
                <br />
                <br />
            </div>
            <br />
            <div class="row shadow shadowing rentacle" style="text-align: center">

                <div class="col-12 col-sm-6 col-md-6 col-lg-6" style="text-align: center">
                    <div>
                        <label class="bluered" style="font-size: 20px">Past User password</label>
                    </div>
                    <div>
                        <label class="purplebule" style="font-size: 20px" id="pastpassword"></label>
                    </div>
                </div>
                <div class="col-12 col-sm-6 col-md-6 col-lg-6" style="text-align: center">
                    <div>
                        <label class="purplebule" style="font-size: 20px">Change to User password</label>
                    </div>
                    <div>
                        <input type="text" style="text-align: center; width: 200px; height: 25px" class="type" id="password" name="password" onkeyup="this.value=this.value.replace(/\s+/g,'')" maxlength="15" />
                    </div>
                </div>
                <br />
                <br />
                <br />
                <br />
            </div>
            <br />
            <div class="row shadow shadowing rentacle" style="text-align: center">
                <div class="col-12 col-sm-6 col-md-6 col-lg-6" style="text-align: center">
                    <div>
                        <label class="bluered" style="font-size: 20px">Past User Rank</label>
                    </div>
                    <div>
                        <label class="purplebule" style="font-size: 20px" id="pastuserRank"></label>
                    </div>
                </div>
                <div class="col-12 col-sm-6 col-md-6 col-lg-6" style="text-align: center">
                    <div>
                        <label class="purplebule" style="font-size: 20px">Change to User Rank</label>
                    </div>
                    <div>
                        <input type="text" style="text-align: center; width: 200px; height: 25px" class="type" id="userRank" name="userRank" onkeyup="this.value=this.value.replace(/\s+/g,'')" maxlength="15" />
                    </div>
                </div>
                <br />
                <br />
                <br />
                <br />
            </div>
            <br />
            <div class="row" style="text-align: center">
                <div class="col-12 col-sm-12 col-md-12 col-lg-12">
                    <button style="width: 20%; font-size: 20px; text-align: center" class="button linkway linkingbutton" id="modify">Modify</button>
                </div>
            </div>
            <br />
            <br />
            <div class="row"></div>
        </div>
    </div>
    <script type="text/javascript" src="/javascript/jquery-3.4.1.min.js"></script>
    <script type="text/javascript" src="/javascript/modernizr.js"></script>
    <script type="text/javascript" src="/javascript/prefixfree.min.js"></script>
    <script type="text/javascript" src="/javascript/bootstrap.bundle.js"></script>
    <script type="text/javascript" src="/javascript/bootstrap.js"></script>
    <script type="text/javascript" src="/javascript/popper.js"></script>
    <script>
        var userName = document.getElementById("userName");
        var password = document.getElementById("password");
        var userRank = document.getElementById("userRank");
        var pastuserName;
        var pastuserRank;
        var pastpassword;
        var pastuserId;
        function GetRequest() {
            var url = location.search;//获取url中"?"符后的字串
            var theRequest = new Object();
            if (url.indexOf("?") != -1) {
                var str = url.substr(1);
                strs = str.split("&");
                for (var i = 0; i < strs.length; i++) {
                    theRequest[strs[i].split("=")[0]] = unescape(strs[i].split("=")[1]);
                }
            }//成功获取多条参数键值对
            return theRequest;
        }
        window.onload = function () {
            var request = new Object();
            request = GetRequest();
            pastuserName = request['pastuserName'];
            document.getElementById("pastuserName").innerText = pastuserName;
            pastpassword = request['pastpassword'];
            document.getElementById("pastpassword").innerText = pastpassword;
            pastuserRank = request['pastuserRank'];
            document.getElementById("pastuserRank").innerText = pastuserRank;
            pastuserId = request['pastuserId'];
            document.getElementById("pastuserId").innerText = pastuserId;
        }
        function check() {
            if (userName.value == "" && userRank.value == "" && password.value == "")
                return false;
            else {
                if (userName.value == "")
                    userName.value = pastuserName;
                if (password.value == "")
                    password.value = pastpassword;
                if (userRank.value == "")
                    userRank.value = pastuserRank;
                return true;
            }
        }//按下按钮的时候，进行检测，是否是空的用户账号或者密码
        $("#main").click(function () {
            window.location = "Main.html";
        });
        $("#modify").click(function () {
            if (check() == true) {
                $.ajax({
                    url: "http://localhost:8080/users/" + String(pastuserId),
                    type: "PUT",
                    dataType: "json",
                    data: {
                        userId: pastuserId,
                        userName: userName.value,
                        password: password.value,
                        userRank: userRank.value,
                    },
                    success: function (str) {
                        alert("success");
                    },
                    error: function (e) {
                        alert("ERROR TO CONNECT");
                    }
                });
            }
            else {
                alert("not include any change");
            }
        });
    </script>
</body>
</html>
